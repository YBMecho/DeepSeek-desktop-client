# DeepSeek 桌面客户端项目文档

## 📖 项目概述

**DeepSeek 桌面客户端** 是一个基于 Electron 框架开发的跨平台桌面应用程序，旨在为用户提供便捷的 DeepSeek AI 聊天服务访问体验。该应用程序具有现代化的界面设计，集成了丰富的功能，使 AI 对话体验更加高效和便捷。

### 基本信息
- **项目名称**: DeepSeek
- **版本**: 1.0.0
- **作者**: YBMecho
- **许可证**: ISC
- **主要功能**: 方便快捷打开网页内容

## ✨ 核心功能

### 1. 🚀 快速启动与访问
- 基于 Electron 框架，提供原生桌面应用体验
- 直接访问 DeepSeek AI 聊天服务 (https://chat.deepseek.com/)
- 优化的启动速度和资源使用

### 2. 🎨 用户界面特性
- **现代化界面设计**: 简洁美观的用户界面
- **主题支持**: 支持浅色、深色和跟随系统主题
- **自定义滚动条**: 美化的滚动条样式，支持主题自适应
- **无边框设计**: 沉浸式窗口体验

### 3. 🪟 多窗口管理
- **新窗口创建**: 支持创建新的聊天窗口
- **窗口复制**: 可以复制当前窗口及其内容
- **多窗口协调**: 智能的多窗口显示/隐藏管理
- **窗口状态记忆**: 记住窗口的可见性状态

### 4. ⌨️ 快捷键系统
- **全局快捷键**: 默认 `Alt+\`` 快速显示/隐藏窗口
- **自定义快捷键**: 用户可在设置中自定义快捷键组合
- **快捷键验证**: 确保快捷键包含修饰键，避免冲突
- **双击重置**: 双击快捷键设置可恢复默认值

### 5. 🔧 系统集成
- **系统托盘**: 最小化到系统托盘，后台运行
- **外部链接处理**: 自动在默认浏览器中打开外部链接
- **右键上下文菜单**: 丰富的右键菜单功能
- **关闭行为设置**: 可选择直接关闭或最小化到托盘

### 6. 🎯 智能特性
- **域名限制**: 限制在 DeepSeek 域名内导航，提高安全性
- **标题锁定**: 保持固定的窗口标题
- **样式注入**: 自动注入自定义 CSS 样式
- **配置持久化**: 用户设置自动保存和加载

## 🏗️ 技术架构

### 技术栈
- **框架**: Electron 37.2.6
- **构建工具**: Electron Forge 7.8.3
- **UI增强**: electron-context-menu 4.1.0
- **自动更新**: electron-squirrel-startup 1.0.1
- **开发语言**: JavaScript (Node.js)

### 项目结构
```
DeepSeek-desktop-client/
├── main.js                    # 主进程文件
├── preload.js                 # 预加载脚本
├── package.json               # 项目配置
├── forge.config.js            # 构建配置
├── public/                    # 静态资源
│   ├── css/
│   │   └── main.css          # 主样式文件
│   ├── js/
│   │   └── hotkey-settings.js # 快捷键设置脚本
│   ├── icons/                # 应用图标
│   │   ├── icon.png
│   │   ├── lp25u-mafhn-001.ico
│   │   └── lp25u-mafhn-001.png
│   └── images/               # 图片资源
│       └── deepseek-color.png
├── README.md                  # 英文说明文档
├── README.zh.md              # 中文说明文档
└── 界面代码文件/              # UI界面代码示例
    ├── DeepSeek登入时窗口界面代码.html
    ├── DeepSeek账号设置界面代码.html
    ├── DeepSeek通用设置界面代码.html
    ├── DeepSeek服务协议设置界面代码.html
    └── 网页主题.html
```

### 架构设计

#### 主进程 (main.js)
- **窗口管理**: 负责创建和管理应用窗口
- **全局快捷键**: 注册和处理全局快捷键
- **系统托盘**: 管理系统托盘图标和菜单
- **配置管理**: 读取和保存用户配置
- **IPC通信**: 与渲染进程通信

#### 预加载脚本 (preload.js)
- **安全桥梁**: 在主进程和渲染进程间提供安全的通信桥梁
- **API暴露**: 向渲染进程暴露有限的 Electron API
- **上下文隔离**: 确保渲染进程的安全性

#### 渲染进程
- **Web内容**: 加载和显示 DeepSeek 网页内容
- **样式注入**: 注入自定义 CSS 样式
- **脚本注入**: 注入快捷键设置等功能脚本

## 🔧 核心功能详解

### 1. 窗口管理系统

#### 主窗口创建
```javascript
function createWindow() {
  mainWindow = new BrowserWindow({
    width: 1280,
    height: 730,
    title: 'DeepSeek',
    icon: path.join(__dirname, 'public/images/deepseek-color.png'),
    webPreferences: {
      nodeIntegration: false,
      contextIsolation: true,
      webSecurity: true,
      preload: path.join(__dirname, 'preload.js')
    },
    autoHideMenuBar: true,
    titleBarOverlay: true
  });
}
```

#### 多窗口支持
- 支持创建新窗口和复制当前窗口
- 每个窗口独立管理，互不干扰
- 统一的窗口配置和安全设置

### 2. 快捷键系统

#### 全局快捷键注册
```javascript
function registerHotkey(hotkey) {
  const ret = globalShortcut.register(hotkey, () => {
    toggleWindow();
  });
}
```

#### 窗口切换逻辑
- **隐藏所有窗口**: 记录当前可见窗口并隐藏
- **恢复窗口**: 恢复之前隐藏的窗口
- **托盘管理**: 隐藏时自动创建系统托盘

### 3. 配置管理系统

#### 配置文件结构
```javascript
const defaultConfig = {
  hotkey: 'Alt+`',           // 默认快捷键
  theme: 'system',           // 主题设置
  closeBehavior: 'minimize'  // 关闭行为
};
```

#### 配置持久化
- 配置文件存储在用户数据目录
- 支持配置验证和错误恢复
- 原子性写入，确保数据完整性

### 4. 安全特性

#### Web安全设置
```javascript
webPreferences: {
  nodeIntegration: false,        // 禁用 Node.js 集成
  contextIsolation: true,        // 启用上下文隔离
  webSecurity: true,             // 启用 Web 安全
  preload: path.join(__dirname, 'preload.js')
}
```

#### 域名访问控制
- 限制只能访问 DeepSeek 相关域名
- 外部链接自动在系统浏览器中打开
- 防止恶意网站访问

## 🎨 用户界面设计

### 主题系统
- **浅色主题**: 适合明亮环境使用
- **深色主题**: 适合暗光环境，保护视力
- **跟随系统**: 自动跟随系统主题变化

### 样式定制
- **自定义滚动条**: 渐变色滚动条，支持悬停效果
- **主题自适应**: 所有UI元素支持主题切换
- **现代化设计**: 符合现代桌面应用设计规范

### 设置界面集成
- **无缝集成**: 设置直接嵌入到 DeepSeek 网页设置中
- **实时预览**: 设置更改实时生效
- **用户友好**: 直观的设置界面和操作反馈

## ⚙️ 配置与自定义

### 用户配置文件
配置文件位置：`%APPDATA%/DeepSeek/config.json`

```json
{
  "hotkey": "Alt+`",
  "theme": "system",
  "closeBehavior": "minimize"
}
```

### 可自定义项目

#### 1. 快捷键设置
- 支持各种修饰键组合（Ctrl、Alt、Shift、Cmd）
- 支持字母、数字、符号键
- 双击快捷键设置可恢复默认值

#### 2. 主题设置
- **浅色主题**: 适合日间使用
- **深色主题**: 适合夜间使用
- **跟随系统**: 根据系统设置自动切换

#### 3. 关闭行为
- **最小化到托盘**: 点击关闭按钮时最小化到系统托盘
- **直接关闭**: 点击关闭按钮时直接退出应用

### 高级自定义

#### CSS样式注入
用户可以通过修改 `public/css/main.css` 来自定义界面样式：

```css
/* 自定义滚动条 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 10px;
}
```

#### JavaScript功能扩展
通过修改 `public/js/hotkey-settings.js` 可以扩展设置功能。

## 🚀 开发与构建

### 开发环境设置

#### 系统要求
- Node.js 18.x 或更高版本
- npm 8.x 或更高版本
- Windows 10 或更高版本（用于打包）

#### 安装依赖
```bash
# 克隆项目
git clone https://github.com/YBMecho/DeepSeek-desktop-client.git
cd DeepSeek-desktop-client

# 安装依赖
npm install
```

### 开发命令

```bash
# 启动开发模式
npm start

# 打包应用程序
npm run package

# 创建安装程序
npm run make

# 测试应用
npm test
```

### 构建配置

#### Electron Forge 配置 (forge.config.js)
```javascript
module.exports = {
  packagerConfig: {
    asar: true,
    icon: 'public/icons/lp25u-mafhn-001'
  },
  makers: [
    {
      name: '@electron-forge/maker-squirrel',
      config: {}
    },
    {
      name: '@electron-forge/maker-zip',
      platforms: ['darwin']
    },
    {
      name: '@electron-forge/maker-deb',
      config: {
        options: {
          icon: 'public/icons/lp25u-mafhn-001.png'
        }
      }
    }
  ]
};
```

### 代码签名
- 支持 Windows 代码签名
- 提高应用程序安全性和用户信任度
- 需要有效的代码签名证书

## 📱 平台支持

### 当前支持
- ✅ **Windows 10+**: 完全支持，包括安装程序和自动更新

### 计划支持
- 🔄 **macOS**: 需要在 macOS 环境中构建
- 🔄 **Linux**: 需要在 Linux 环境中构建

### 跨平台注意事项
- Electron 应用理论上支持所有主要平台
- 不同平台需要相应的构建环境
- 图标和安装程序格式因平台而异

## 🔒 安全考虑

### 应用程序安全
- **上下文隔离**: 启用 Electron 的上下文隔离功能
- **禁用 Node.js 集成**: 在渲染进程中禁用 Node.js 访问
- **预加载脚本**: 通过预加载脚本提供安全的 API 访问
- **内容安全策略**: 实施严格的内容安全策略

### 网络安全
- **域名白名单**: 只允许访问信任的域名
- **HTTPS 强制**: 确保所有通信使用 HTTPS
- **外部链接隔离**: 外部链接在系统浏览器中打开

### 数据安全
- **本地配置加密**: 用户配置文件安全存储
- **无敏感数据存储**: 不存储用户凭证或敏感信息
- **安全的IPC通信**: 主进程和渲染进程间的安全通信

## 🐛 故障排除

### 常见问题

#### 1. 快捷键不生效
**问题**: 设置的快捷键无法触发窗口显示/隐藏
**解决方案**:
- 检查快捷键是否被其他应用程序占用
- 确保快捷键包含至少一个修饰键
- 尝试重新设置快捷键

#### 2. 应用无法启动
**问题**: 双击应用图标后无反应
**解决方案**:
- 检查 Windows 防火墙和杀毒软件设置
- 尝试以管理员权限运行
- 重新安装应用程序

#### 3. 配置文件损坏
**问题**: 应用设置丢失或无法保存
**解决方案**:
- 删除配置文件：`%APPDATA%/DeepSeek/config.json`
- 重启应用程序以重新生成默认配置

#### 4. 系统托盘图标消失
**问题**: 最小化后找不到托盘图标
**解决方案**:
- 检查系统托盘设置，确保显示所有图标
- 使用任务管理器检查应用程序是否在运行
- 重启应用程序

### 调试信息

#### 开发者工具
- 按 `F12` 或 `Ctrl+Shift+I` 打开开发者工具
- 查看控制台输出获取错误信息
- 使用网络面板检查网络请求

#### 日志文件
应用程序日志通常输出到控制台，可以通过以下方式查看：
```bash
# 在命令行中启动应用以查看日志
DeepSeek.exe
```

## 📝 更新日志

### 版本 1.0.0 (当前版本)
- ✨ 初始版本发布
- 🎨 现代化用户界面设计
- ⌨️ 自定义快捷键支持
- 🌓 主题切换功能
- 🪟 多窗口管理
- 🔧 系统托盘集成
- 🎯 智能上下文菜单
- 🔒 安全性增强

### 计划更新
- 🍎 macOS 版本支持
- 🐧 Linux 版本支持
- 🌐 多语言界面支持
- 📱 更多自定义选项
- 🔄 自动更新机制优化

## 🤝 贡献指南

### 如何贡献
1. **Fork 项目**: 在 GitHub 上 Fork 本项目
2. **创建分支**: `git checkout -b feature/新功能`
3. **提交更改**: `git commit -m '添加新功能'`
4. **推送分支**: `git push origin feature/新功能`
5. **创建 Pull Request**: 在 GitHub 上创建 PR

### 贡献优先级
- 🍎 **macOS 版本构建** - 在 macOS 环境中构建应用
- 🐧 **Linux 版本构建** - 在 Linux 环境中构建应用
- 🌐 **国际化支持** - 添加多语言支持
- 🎨 **UI/UX 改进** - 界面优化和用户体验提升
- 🐛 **Bug 修复** - 发现和修复问题
- 📚 **文档完善** - 改进文档和示例

### 代码规范
- 使用 ESLint 进行代码检查
- 遵循 JavaScript 标准编码规范
- 添加适当的注释和文档
- 确保代码的可读性和可维护性

## 📄 许可证

本项目基于 [ISC 许可证](LICENSE) 开源。

## 🙏 致谢

感谢以下开源项目的支持：
- [Electron](https://electronjs.org/) - 跨平台桌面应用框架
- [Electron Forge](https://www.electronforge.io/) - Electron 应用打包工具
- [electron-context-menu](https://github.com/sindresorhus/electron-context-menu) - 上下文菜单增强

## 📞 联系方式

- **作者**: YBMecho
- **QQ**: 3350198579
- **邮箱**: 3350198579@qq.com
- **项目地址**: [GitHub](https://github.com/YBMecho/DeepSeek-desktop-client)

---

<div align="center">
  如果这个项目对您有帮助，请考虑给一个 ⭐ Star！
</div>
